<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The 8 Wastes Quiz</title><!--css stylesheet-->
    <link rel="stylesheet" href="assets/css/style.css" type="text/css" />

    <script>
        let attemptCount = 0;
        
        function checkAnswers() {
            let answerScore = 0
            let answerList = 
                ['dummy', 
                ['inventory', 'excess inventory'], 
                ['transportation', 'unnecessary transportation'], 
                ['motion', 'extra motion'], 
                ['waiting', 'waiting time'], 
                ['overproduction', 'over-production'],
                ['overprocessing', 'over-processing', 'over processing', 'extra processing', 'extra-processing', 'excess processing'], 
                ['defects', 'errors'], 
                ['skills', 'talent', 'unused talent', 'non-utilised-talent', 'non utilised talent', 'unutilised talents', 'non-utilized-talent', 'non utilized talent', 'unutilized talents']];
            
            for (let answerCount = 1; answerCount <= 8; answerCount++) { 
                let questionString = "waste" + answerCount;
                console.log(questionString);
                let answerVal = document.getElementById(questionString);
                let answerText = answerVal.value.toLowerCase();
                console.log(answerText);
                
                resultIndex = getIndexOfK(answerList, answerText);
                console.log(resultIndex);
                if (resultIndex != undefined && answerText != "") {
                    console.log('found it');
                    let answerIndex = resultIndex[0];
                    console.log(answerIndex);
                    answerList.splice(answerIndex, 1);
                    console.log(answerList);
                    ++answerScore;
                    if (answerScore == 8){
                        alert("Well Done! You have completed the quiz. " +
                                "It took you: " + (attemptCount + 1) + " attempts.");
                        document.getElementById('buttonNext').style.display = "inline";
                        resetAnswers();
                        return;
                    }
                    console.log("Answer Score is: " + answerScore);
                }else {
                    console.log('cannot find it');
                }
            }

            ++attemptCount;
            answerSpanText = document.getElementById("answerSpan");
            answerSpanText.innerText = answerScore + " correct - from: " + attemptCount + " attempt(s).";
            
            if (attemptCount == 3){
                if (confirm("Do you need a clue?")) {
                    alert("Remember TIMWOODS ...");
                    }
            }
            
            if (attemptCount >= 5){
                checkColors();
            }

        }

        function resetAnswers() {
            attemptCount = 0;
            let answerScore = 0;
            let answerList = ['dummy', 
                                ['inventory', 'excess inventory'], 
                                ['transportation', 'unnecessary transportation'], 
                                ['motion', 'extra motion'], 
                                ['waiting', 'waiting time'], 
                                ['overproduction', 'over-production', 'over production'],
                                ['overprocessing', 'over-processing', 'over processing', 'extra processing', 'extra-processing', 'excess processing'], 
                                ['defects', 'errors'], 
                                ['skills', 'talent', 'unused talent', 'non-utilised-talent', 'non utilised talent', 'unutilised talents', 'non-utilized-talent', 'non utilized talent', 'unutilized talents']];
            console.log(answerList);
            for (let answerCount = 1; answerCount <= 8; answerCount++) { 
                let questionString = "waste" + answerCount;
                let answerVal = document.getElementById(questionString);
                answerVal.value = "";
                document.getElementById(questionString).style.backgroundColor = "white";
            }
            answerSpanText = document.getElementById("answerSpan");
            console.log(answerSpanText);
            answerSpanText.innerText = "";
        }

function checkColors() {
            let answerScore = 0;
            let answerList = 
                ['dummy', 
                ['inventory', 'excess inventory'], 
                ['transportation', 'unnecessary transportation'], 
                ['motion', 'extra motion'], 
                ['waiting', 'waiting time'], 
                ['overproduction', 'over-production'],
                ['overprocessing', 'over-processing', 'over processing', 'extra processing', 'extra-processing', 'excess processing'], 
                ['defects', 'errors'], 
                ['skills', 'talent', 'unused talent', 'non-utilised-talent', 'non utilised talent', 'unutilised talents', 'non-utilized-talent', 'non utilized talent', 'unutilized talents']];
            
            for (let answerCount = 1; answerCount <= 8; answerCount++) { 
                let questionString = "waste" + answerCount;
                console.log(questionString);
                let answerVal = document.getElementById(questionString);
                let answerText = answerVal.value.toLowerCase();
                console.log(answerText);
                
                resultIndex = getIndexOfK(answerList, answerText);
                console.log(resultIndex);
                if (resultIndex != undefined && answerText != "") {
                    console.log('found it');
                    let answerIndex = resultIndex[0];
                    console.log(answerIndex);
                    answerList.splice(answerIndex, 1);
                    console.log(answerList);
                    document.getElementById(questionString).style.backgroundColor = "limegreen";
                    ++answerScore;
                }else {
                    console.log('cannot find it');
                }
            }

            ++attemptCount;
            
        }

        function getIndexOfK(arr, k) { //credit to https://jsfiddle.net/wao20/Lct1de56/ via https://stackoverflow.com/questions/16102263/to-find-index-of-multidimensional-array-in-javascript
            for (var i = 0; i < arr.length; i++) {
                var index = arr[i].indexOf(k);
                if (index > -1) {
                return [i, index];
                }
            }
        }

    </script>

</head>

<body>
    
    <section>
        <h1>Name the 8 Wastes ... <span id="answerSpan"></span></h1>
        <div id="wastecontainer">
            <form>
                <label for="waste1">Waste 1:</label>
                <input type="text" id="waste1" > 
                <br> 
                <label for="waste2">Waste 2:</label>
                <input type="text" id="waste2" >
                <br> 
                <label for="waste3">Waste 3:</label>
                <input type="text" id="waste3" >
                <br> 
                <label for="waste4">Waste 4:</label>
                <input type="text" id="waste4" >
                <br> 
                <label for="waste5">Waste 5:</label>
                <input type="text" id="waste5" >
                <br> 
                <label for="waste6">Waste 6:</label>
                <input type="text" id="waste6" >
                <br> 
                <label for="waste7">Waste 7:</label>
                <input type="text" id="waste7" >
                <br> 
                <label for="waste8">Waste 8:</label>
                <input type="text" id="waste8" >
            </form>
        </div>
        <div>
            <button onclick="checkAnswers()">Check Answers</button>
            <button id="buttonReset" onclick="resetAnswers()">Reset Answers</button>
            <button id="buttonNext" ><a href="pagetwo.html" >Next</a></button>
        </div>
    </section>

</body>
</html>